<div align="center">

# Noether
built with PyTorch.

[![Docs - noether-docs.emmi.ai](https://img.shields.io/static/v1?label=Docs&message=noether-docs.emmi.ai&color=2ea44f&logo=gitbook)](https://noether-docs.emmi.ai)

</div>

<div>
<strong>Noether</strong> is Emmi AIâ€™s <strong>open software framework for Physics AI</strong>. Built on <strong>modern 
transformer building blocks</strong>, it delivers the full engineering stack, allowing teams to build, train, 
and operate industrial simulation models across engineering verticals, eliminating the need for component 
re-engineering or an in-house deep learning team.
</div>

---

# Table of contents

- [Installation](#installation)
  - [Pre-requisites](#pre-requisites)
  - [Working with the source code](#working-with-the-source-code)
    - [How to cleanup and do a fresh installation](#how-to-cleanup-and-do-a-fresh-installation)
  - [Working with pre-built packages](#working-with-pre-built-packages)
- [Contributing](#contributing)
  - [Guidelines](#guidelines)
  - [Third-party contributors](#third-party-contributors)
  - [Configuring IDEs](#configuring-ides)
- [Examples](#examples)
- [Supported systems](#supported-systems)

---
# Installation

It is possible to use the framework either from source or from the pre-built packages.

## Pre-requisites

- install [uv](https://docs.astral.sh/uv/getting-started/installation/) as the package manager on your system
- clone the repo into your desired folder: `git clone git@github.com:Emmi-AI/core.git`
- follow the next steps ðŸš€

## Working with the source code
Navigate to the repo root and run the following commands:

```console
uv venv                    # this will create a default python virtual environment defined in the `pyproject.toml`
source .venv/bin/activate  # this will activate your newly created environment in your terminal
pre-commit install         # this will install git pre-commit hooks that will run automatically at every commit
uv sync                    # this will install all required dependencies from the `uv.lock` file
```

Validate your installation by simply running the tests (if something fails with module import errors it means that the 
installation was incomplete):
```console
pytests -q tests/
```
if the tests are passed (warnings are okay to be logged) then you're all set and ready to go!

### How to cleanup and do a fresh installation

You might be in a situation when your venv won't be configured as intended anymore, to fix this:

- Deactivate existing environment in your terminal by running: `deactivate`
- Remove existing `.venv` (optionally add `uv.lock`): `rm -rf .venv uv.lock`
- [Optional] Clean uv cache: `uv cache clean`
- Create a new venv and activate it: `uv venv && source .venv/bin/activate`
- [Optional] If deleted, generate a new `uv.lock` file: `uv lock`
- [Optional] If contributor: `pre-commit install`

## Working with pre-built packages
> [!NOTE]
> To be added later.

---
# Contributing

If you're a contributor, you have to follow the installation steps specified [above](#working-with-the-source-code).

## Guidelines

We follow the following standards:

- Use typed coding in Python.
- Write documentation to new features and modules:
  - In case of larger modules make sure to update the documentation that is not autogenerated under the `docs/`.
  - For smaller features writing a clear API documentation is enough and required.
- Before committing your changes:
  - Run tests via `pytest -q tests/`.
  - Ensure that [pre-commit hooks](#pre-commit-hooks) are not disabled and are runnable at every commit.
    We are using `ruff` as a linter and formatter as well as `mypy` for type checking.
    Their configuration is defined in the project's root [pyproject.toml](pyproject.toml).
- Creating pull requests (PRs) is a mandatory step for any incoming changes that will end up on the `main` branch.
  - For a PR to be merged at least one core maintainer must give their approval.

## Pre-commit Hooks
To run the pre-commit configuration on all files, you can use:
```console
pre-commit run --all-files
```
To run the pre-commit configuration on specific files use:
```console
pre-commit run --files /your/file/path1.py /your/file/path2.py
```

## Third-party contributors

In case of bugs use a corresponding template to create an issue.

In case of feature requests you can submit a PR with clear description of the proposed feature. In that case it must 
follow the [guidelines](#guidelines), or file a feature request as an issue. In that case, we will consider addding it to our backlog.

## Configuring IDEs

Emmi AI developers have to consult the internal documentation for more granular setup.

### Pycharm

- Mark `/src/` directory as `Sources Root` (right mouse button click on the folder -> `Mark Directory as`)
- Settings -> Editor -> Code Style -> Python -> Tabs and Indents -> change `Continuation indent` from 8 to 4.
- Settings -> Editor -> Code Style -> Python -> Spaces -> Around Operators -> `Power operator (**)`

### VS Code

> [!WARNING]
> Check if it's outdated

Add the root folder (?) of the library to the analysis path in your VSCode config.

---
# Examples

We provide the following documentation to get you started:

- [Tutorial](/tutorial) - will explain the core concepts and how internal modules work together.
- [Examples]() - TO BE ADDED

---
# Working with GitHub

With available GitHub Actions we automate several workflows relevant to our development ranging from buildings the docs
to building our modules as wheel files.

To test the desired workflow locally it is recommended to use [act](https://github.com/nektos/act).

> [!NOTE]
> Make sure to install Docker Desktop as requested by the official documentation.

Install it on a Mac with: `brew install act`

For example, to check the package release pipeline:
```console
act workflow_dispatch --input version_type=patch -W .github/workflows/release.yml
```
or to see if tests are runnable:
```console
act pull_request -W .github/workflows/run-tests.yml
```

---
# Supported systems
Worth noting that we work with Mac and Linux environments thus in case of any issues on Windows, at this time, you have
to find workarounds yourself.
